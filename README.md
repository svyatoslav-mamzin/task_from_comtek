# Комтек ТЗ Python

Разработан сервис терминологии и REST API к нему.



## Описание

Сервис терминологии оперирует ниже перечисленными сущностями.



 ### "Справочник" состоит из двух сущностей:
 #### models.py
#### Glossary
- идентификатор справочника (глобальный и не зависит от версии)
- наименование
- короткое наименование
- описание
#### Version
- идентификатор версии
- родительский идентификатор
- версия (тип: строка, не может быть пустой уникальная в пределах одного справочника)
  *условие уникальности выполняется засчет параметра unique_together = ('glossary','version',)*
- дата начала действия справочника этой версии



### Сущность "Элемент справочника"
#### GlossaryElement
- идентификатор
- родительский идентификатор
- код элемента (тип: строка, не может быть пустой)
- значение элемента (тип: строка, не может быть пустой)



### API предоставляет следующие методы:
#### views.py
- получение списка справочников. 
  *class GlossaryView http://127.0.0.1:8000/api/glossaries/*
- получение списка справочников, актуальных на указанную дату.
*class CurrentGlossariesView http://127.0.0.1:8000/api/glossaries/<YYYY-MM-DD>*
- получение элементов заданного справочника текущей версии
  *class ElementsGlossaryCurrentVersView http://127.0.0.1:8000/api/elements/<id справочника>*
- валидация элементов заданного справочника текущей версии 
  *class ElementGlossaryFilter http://127.0.0.1:8000/api/elements/filter/<id cправочника>/<?element_id=<id элемента>&element_id=<id элемента> и.т.д>*
- получение элементов заданного справочника указанной версии
  *class ElementsGlossarySpecVersView http://127.0.0.1:8000/api/elements/<id справочника>/<версия справочника>* 
- валидация элемента заданного справочника по указанной версии
*class ElementGlossaryFilter http://127.0.0.1:8000/api/elements/filter/<id справочника>/<?version=<версия справочника>&element_id=<id элемента>*

Методы для получения данных из БД и функция валидации параметров GET запросов находятся в my_service.servises.py 
  
### В API предусмотрена пагинация страниц (данные возвращаются частями по 10 элементов).
#### settings.py
REST_FRAMEWORK = {
    'DEFAULT_PAGINATION_CLASS': 'rest_framework.pagination.LimitOffsetPagination',
    'PAGE_SIZE': 10
}
#### paginator.py
class MyPaginationMixin(object) от которого наследуются APIView

К сервису иметься GUI административной части, с помощью которой возможно добавлять новые справочники, новые версии справочников, указывать дату начала действия и наполнять справочники элементами.

## Технологии

* Python == 3.8
* Django==2.2.6
* djangorestframework==3.12.2
* psycopg2-binary==2.8.6
- *pip install -r requirements.txt*





